name: Generate Relax Music Beads

on:
  workflow_dispatch:  # You can also schedule it using 'schedule'

jobs:
  build-video:
    runs-on: ubuntu-latest

    steps:
      - name: Install dependencies
        run: pip install google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

      - name: ⬇️ Checkout code
        uses: actions/checkout@v3

      - name: ⚙️ Set up FFmpeg
        run: |
          sudo apt update
          sudo apt install -y ffmpeg

      - name: 🛠️ Run Bash video script
        run: bash scripts/make_video.sh

      - name: 📦 Upload final video as artifact
        uses: actions/upload-artifact@v4
        with:
          name: final-relaxing-video
          path: "*.mp4"
