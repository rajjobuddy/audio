name: Generate Relax Music Beads

on:
  workflow_dispatch:  # You can also schedule it using 'schedule'
    inputs:
      duration:
        description: "Select video duration"
        required: true
        default: "3600"
        type: choice
        options:
          - 1800     # 30 minutes
          - 3600     # 1 hour
          - 7200     # 2 hours
          - 14400    # 4 hours
          - 28800    # 8 hours    
jobs:
  build-video:
    runs-on: ubuntu-latest

    steps:
      - name: Install dependencies
        run: pip install google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

      - name: â¬‡ï¸ Checkout code
        uses: actions/checkout@v3

      - name: âš™ï¸ Set up FFmpeg
        run: |
          sudo apt update
          sudo apt install -y ffmpeg

      - name: ğŸ› ï¸ Run Bash video script
        run: bash scripts/make_video.sh ${{ github.event.inputs.duration }}

      - name: ğŸ“¦ Upload final video as artifact
        uses: actions/upload-artifact@v4
        with:
          name: final-relaxing-video
          path: "*.mp4"
